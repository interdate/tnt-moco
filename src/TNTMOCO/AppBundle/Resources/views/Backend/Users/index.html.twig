{% extends "TNTMOCOAppBundle::backend.layout.html.twig" %}




{% block content %}


	<div id="content_wrapper">
		<div class="headerWrapper">
			<h4>
				<i class="user icon"></i>
				Users
			</h4>
		</div>
		
		{{ include ('TNTMOCOAppBundle:Backend/Users:mainMenu.html.twig', {'activeTab': 1}) }}
		
		<div class="desktop">
			<div class="tabSegments">			
				<div class="ui active tab segment stacked">					
					<div class="search">
					
						<input type="hidden" id="loadDepotsRoute" value="{{ path('users_depots') }}">

						<div class="block first">
							<h3 class="ui header">
								<i class="search circular icon"></i>
								Search By Filters
							</h3>
						
							<div class="fieldsWrapper">								
								<div class="ui form">
									
									<div class="ui two fields">
										<div class="field">
											<select>
												<option value="">Property</option>
												<option vlaue="">Active</option>
												<option vlaue="">Inactive</option>
												<option vlaue="">Blocked</option>
												<option vlaue="">New</option>
												<option vlaue="">Old</option>
												
											</select>
										</div>
										<div class="field">
											<select id="search_role">
												<option value="">Role</option>
												{% for role in roles %}
													<option vlaue="{{ role.id }}">{{ role.name }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									
									<div class="ui two fields">
										<div class="field">
											<select id="search_country">
												<option value="">Country</option>
												{% for country in countries %}
													<option vlaue="{{ country.id }}">{{ country.name }}</option>
												{% endfor %}
											</select>
										</div>
										<div class="field">
											<select>
												<option value="">Depot</option>											
											</select>
										</div>
									</div>
									<div class="right">
										<div class="ui labeled icon blue small button" onclick="$('#submitButton_1').click();">
											<i class="inverted search icon"></i>
											Find
										</div>
									</div>
									<input type="submit" class="hidden" id="submitButton_1">
									
								</div>
							</div>
						</div>						

						<div class="block second">
							<h3 class="ui header">
								<i class="search circular icon"></i>
								Text Search
							</h3>
							<div class="fieldsWrapper">
								<div class="ui form">
									<div class="field">
										<select>
											<option value="">Username</option>
											<option vlaue="">E-mail</option>
											<option vlaue="">First Name</option>
											<option vlaue="">Last Name</option>
										</select>
									</div>
									
									<div class="field">										
										<input type="text">
									</div>
									
									<div class="right">
										<div class="ui labeled icon blue small button" onclick="$('#submitButton_1').click();">
											<i class="inverted search icon"></i>
											Find
										</div>
									</div>
									<input type="submit" class="hidden" id="submitButton_1">
									
								</div>
	
							</div>
						</div>

						<div class="clear"></div>
					</div>
				
				</div>
				
				
				<div class="ui active tab segment stacked">
					<div class="ui form">
					
						<h3 class="ui header">
							<i class="users circular icon"></i>
							All Users
						</h3>
					
					
						<table class="ui basic table small usersTable">
							<thead>
								<tr>
									<th>Active</th>
									<th>Username</th>
									<th>First Name</th>														
									<th>Last Name</th>
									<th>E-mail</th>														
									<th>Phone</th>
									<th>Role</th>
									<th>Countries</th>
									<th>Depot</th>
									<th>Properties</th>
									<th>Edit</th>																																
								</tr>
							</thead>
							
							<tbody>					
							{% for user in users %}						
								<tr id="user_{{ user.id }}">
									<td>
										<div class="ui toggle checkbox">								
											<input type="checkbox" name="setIsActive" value="{{ user.id }}" {% if user.isActive %}checked="checked"{% endif %}>
											<label></label>
										</div>																														
									</td>
									<td>{{ user.username }}</td>
									<td>{{ user.firstName }}</td>
									<td>{{ user.lastName }}</td>
									<td>{{ user.email }}</td>
									<td>{{ user.phone }}</td>
									<td>{{ user.role.name }}</td>
									<td>{% if user.countries|length %}{{ user.countries|join(', ') }}{% else %}{{ user.country }}{% endif %}</td>
									<td>{% if user.depot %}{{ user.depot.name }}{% endif %}</td>
									<td>
										{% if user.isNew %}<i class="icon empty star purple large"></i>{% endif %}
										{% if not user.isNonLocked %}<i class="icon block basic red large"></i>{% endif %}
									</td>
									<td><a href="{{ path('users_edit', {'userId': user.id}) }}"><i class="icon edit blue large"></i></a></td>																									
									
								</tr>
								<tr class="hidden">
									<td colspan="11" class="profileWraper">
										<div class="ui inverted dimmer">
										    <div class="ui text large loader">Loading</div>
										</div>
										<div class="profile" id="profile_{{ user.id }}">
											
										</div>	
									</td>
								</tr>								
							{% endfor %}			
							</tbody>
						</table>
						<input type="hidden" class="entityName" value="User">
						
						{{ knp_pagination_render(users) }}
						
					</div>
											
				</div>							
			</div>
		</div>
	</div>


{% endblock %} 

